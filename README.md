# KornBeat - Music Streaming Platform  
  
A microservices-based music streaming application with personalized recommendations, built with Node.js, React, and Docker.  
  
## ğŸµ Features  
  
- User authentication with JWT tokens  
- Music catalog management and streaming  
- Playlist and favorites system  
- Graph-based personalized recommendations  
- Playback position persistence  
- Multi-service architecture with Docker orchestration  
  
## ğŸ—ï¸ Architecture  
  
KornBeat uses a microservices architecture with the following components:  
  
| Service | Port | Technology | Purpose |  
|---------|------|------------|---------|  
| Frontend | 3000 | React | User interface |  
| auth-service | 3001 | Node.js/Express | Authentication & sessions |  
| music-service | 3002 | Node.js/Express | Music catalog & streaming |  
| recommendation-service | 3003 | Node.js/Express | Graph-based recommendations |  
| MongoDB | 27017 | MongoDB | Primary database |  
| Neo4j | 7474/7687 | Neo4j | Graph database for recommendations |  
| Redis | 6379 | Redis | Caching & sessions |  
| MinIO | 9000/9001 | MinIO | Object storage for MP3 files |  
  
## ğŸš€ Quick Start  
  
### Prerequisites  
  
- Docker and Docker Compose  
- Node.js 14.x or higher  
- npm 6.x or higher  
  
### 1. Start Infrastructure Services  
  
```bash  
docker-compose up -d mongodb redis minio neo4j
```

### 2. Run Backend Services
```bash
# Music Service  [header-2](#header-2)
cd services/music-service  
npm install  
npm run dev  

# Auth Service (in another terminal)  [header-3](#header-3)
cd services/auth-service  
npm install  
npm run dev

# Recommendation Service (in another terminal)  [header-4](#header-4)
cd services/recommendation-service  
npm install  
npm run dev
```

### 3. Run Frontend
```bash
cd frontend  
npm install  
npm start
```

### 4. Import music
Place MP3 files in services/music-service/uploads/music/ then run:
```bash
cd services/music-service  
node importMusic.js
```

## ğŸŒ Access Points
- Frontend: http://localhost:3000
- Auth API: http://localhost:3001
- Music API: http://localhost:3002/api/music/songs
- Recommendation API: http://localhost:3003
- Neo4j Browser: http://localhost:7474 (neo4j/neo4j_password)
- MinIO Console: http://localhost:9001 (minioadmin/minioadmin)

## ğŸ› ï¸ Development
### Local Development Setup
For local development, run infrastructure services in Docker while application services run natively with hot-reload:
```bash
# Start only infrastructure  [header-5](#header-5)
docker-compose up -d mongodb redis minio neo4j  
  
# Run services with hot-reload  [header-6](#header-6)
npm run dev  # in each service directory
```

### Testing
Run frontend tests with Jest
```bash
cd frontend  
npm test
```

### Environment Variables
Create `.env` files in each service directory. Key variables:
- `JWT_SECRET` - JWT signing key
- `MONGODB_URI` - Database connection
- `REDIS_HOST` - Redis connection
- `MINIO_ENDPOINT` - Object storage connection

## ğŸ“¦ Production Deployment
For production deployment using Docker Compose:
```bash
docker-compose up -d
```
This builds and starts all services with health checks and proper dependencies.

## ğŸ”„ Data Flow
1. User authenticates via auth-service
2. Frontend requests music from music-service
3. Music metadata stored in MongoDB, files in MinIO
4. Recommendations generated by recommendation-service using Neo4j
5. Sessions and cache managed by Redis

## ğŸ›‘ Stopping Services
```bash
# Stop all services  [header-7](#header-7)
docker-compose down  
  
# Stop application services only (keep infrastructure)  [header-8](#header-8)
# Use Ctrl+C in each terminal running npm run dev  [header-9](#header-9)
```

## ğŸ“ Project Structure
```
KornBeat/  
â”œâ”€â”€ services/  
â”‚   â”œâ”€â”€ auth-service/  
â”‚   â”œâ”€â”€ music-service/  
â”‚   â””â”€â”€ recommendation-service/  
â”œâ”€â”€ frontend/  
â”œâ”€â”€ databases/  
â”‚   â”œâ”€â”€ mongodb/  
â”‚   â””â”€â”€ redis/  
â”œâ”€â”€ nginx/  
â””â”€â”€ docker-compose.yml  
```

## ğŸ¤ Contributing
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request
